from ftw.myworkspace.interfaces import IOrderStorage
from ftw.myworkspace.testing import FTWMYWORKSPACE_FUNCTIONAL_TESTING
from plone.mocktestcase.dummy import Dummy
from plone.registry import Record, field
from plone.registry.interfaces import IRegistry
from plone.testing.z2 import Browser
from Products.CMFCore.utils import getToolByName
from random import randint
from unittest2 import TestCase
from zope.browser.interfaces import IBrowserView
from zope.component import adapts
from zope.component import getAdapter
from zope.component import getGlobalSiteManager
from zope.component import queryUtility
from zope.interface import implements
from zope.interface import Interface
import transaction
from plone.app.testing import SITE_OWNER_PASSWORD, SITE_OWNER_NAME


class TestVocabularyTicketBox(TestCase):

    layer = FTWMYWORKSPACE_FUNCTIONAL_TESTING

    def setUp(self):
        super(TestVocabularyTicketBox, self).setUp()
        self.portal = self.layer['portal']
        self.portal_url = self.portal.portal_url()

        self.browser = Browser(self.layer['app'])
        self.browser.handleErrors = False

        self.browser.addHeader('Authorization', 'Basic %s:%s' % (
            SITE_OWNER_NAME, SITE_OWNER_PASSWORD, ))
        
        self.portal.invokeFactory('Workspace', 'test_workspace')
        
        self.workspace = self.portal.test_workspace
        self.workspace.processForm()
        
        transaction.commit()

    def test_create_with_paypal(self):

        self.browser.open(
            self.workspace.absolute_url() + '/createObject?type_name=Ticket+Box')

